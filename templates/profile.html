{% extends "base.html" %} 
{% block content %}
<div class="row">
  <div class="col s12 m8 offset-m2">
    <div class="card-panel">
        <img src="{{ url_for('static', filename='images/snowcap.png') }}" alt="snowcapped card" class="snowcap-image">
      <h3 class="profile-title">
        {{ user.username }}'s Christmas Gifts
      </h3> 
      </div>
    </div>
  </div>
</div>

<div class="start-adding-gifts">
    <a href="{{ url_for('add_gift') }}">
        <button type="submit">Start adding your gifts!</button>
    </a>
</div>

<!-- Countdown timer -->
<div class="center-align">
    <h4 class="timer-title">Time Until Christmas:</h4>
    <div id="countdown">
        <div class="countdown-tile">
            <div class="number">{{ days }}</div>
            <div class="text">Days</div>
        </div>
        <div class="countdown-tile">
            <div class="number">{{ hours }}</div>
            <div class="text">Hrs</div>
        </div>
        <div class="countdown-tile">
            <div class="number">{{ minutes }}</div>
            <div class="text">Minutes</div>
        </div>
        <div class="countdown-tile">
            <div class="number">{{ seconds }}</div>
            <div class="text">Seconds</div>
        </div>
    </div>
</div>

<h4>Bought Gifts</h4>
<ul class="collapsible">
    {% set any_gifts_bought = false %} {# Initialize a flag to track if any gifts are bought #}
    {% for gift in gifts %}
    {% if gift.bought %}
    {% set any_gifts_bought = true %} {# Set the flag to true if there are bought gifts #}
    <li>
        <div class="collapsible-header">
            {{ gift.gift_item }}
        </div>
        <div class="collapsible-body">
            <p>For: {{ gift.list_name }}</p>
            <p>Cost: {{ gift.cost }}</p>
            <a href="{{ url_for('undo_bought', gift_id=gift._id) }}"
                class="waves-effect waves-light btn undo-button">Undo</a>
        </div>
    </li>
    {% endif %}
    {% endfor %}
</ul>

{% if not any_gifts_bought %} {# Display the message if no gifts are bought #}
<p>No gifts bought yet!</p>
{% endif %}


<script src="{{ url_for('static', filename='script.js') }}"></script>
<script src="{{ url_for('static', filename='js/countdown.js') }}"></script>
{% endblock %}
